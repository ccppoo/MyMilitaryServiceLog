# CPU bound vs GPU bound (2/2)

* 왜 좋은 컴퓨터를 써도 개판이니 - 게임 최적화

* 게임을 만드는 회사

* 소프트웨어 vs 하드웨어

## 왜 좋은 컴퓨터를 써도 개판이니 - 게임 최적화

컴퓨터는 CPU 자원을 이용해 프로그램을 구동한다.

컴퓨터에는 게임만 작동하는 것이 아니므로 아주 빠른 시간 간격으로 프로그램이 작동할 수 있는

CPU 사용권한을 적절히 돌아가면서 준다.

프로그램마다 CPU 사용권한을 주는 스케쥴링(scheduling)에 대해 설명을 하자면 너무 외길로 샐수 있으니 궁금하면 알아서 찾아보자.

*- 게임 이야기로 돌아가서 -*

OS에서 프로그램(게임)에게 사용권한을 주고, 게임은 OS에서 받은 권한을 게임 내부에 필요한

게임 로직 계산(예: 궤적 계산, 빛 반사), 화면 프레임 리프레시, 외부 기기 입력처리(예: 키보드, 마우스 입력), 등 작업에 사용한다.

이 모든 작업에 CPU 연산이 쓰인다.

캐릭터와 물체의 움직임, 시점의 변경에 따른 빛 변화, 그림자,등등... 수많은 변화에 따른 계산이 필요하다.

계산이야 좋은 CPU가 있다면 충분히 가능하지만 관건은 제한된 시간내에 모든 것을 처리해야한다는 것이다.

초당 60 프레임 (60 fps)을 고정적으로 지원하기 위해선 모든 연산이 1초/60 = 0.01666 ... 초, 

즉 16.6ms 내에 모든 것을 처리해야한다는 것이다.

이 시간은 CPU 작업 + GPU 작업이 모두 끝나야되는 시간이다.

그래픽 수준이 높고, 화질이 높을 수록 처리해야할 작업량이 많아지면 16.6ms 내에 일을 처리하지 못하고 60fps를 달성하지 못하는 것이다

## 게임을 만드는 회사

게임을 하는 유저라면, 특히 오랫동안 한 유저라면 늘 입에 달고 사는 말이 있다. - **최적화가 개판이다**

최적화라는 말은 대체 무엇일까? 모든 유저가 말하는 그 최적화는 어떤 의미로 알고 쓰는 것일까?

마침 최근(2020년 12월 초)에 메이플스토리가 드디어 **64비트**를 지원하는 소식에 유저들은 환호하고 있다.

32비트 프로그램이 (중간 과정을 생략하고) 64비트 프로그램으로 컴파일이 된다면 특별한 경우외에는 빨라진다.

CPU에 32개의 비트를 한번에 전달할 수 있던 것을 2배만큼 전달 할 수 있기 때문이다.

이런 측면에서 유저 입장에서 '최적화'가 이뤄진다고 표현할 수 있다고 생각한다. 일단 빨라지면 좋은거니깐.

다시 CPU와 GPU 이야기로 돌아가면 16.6 ms에 모든 것이 이뤄져야 하는 것이 게임이다.

화면에 보이는 장면을 1초에 60장씩 보여주는 것은 그림을 그리는 화가와 같다.

생각이 느려서 고민하면 CPU 또는 소프트웨어(생각하는 절차)에 문제(최적화 안됨)가 있는 것이고

무엇을 그릴지 머리속에 다 정리가 돼 있는데 팔이 느린 경우 GPU에 문제가 있다고 이해할 수 있다.

## 소프트웨어 vs 하드웨어

하드웨어의 발전은 소프트웨어의 발전보다 빠르다.

소프트웨어의 속도는 2010년초까지 CPU의 발전에 힘입어 별다른 노력 없어 빨라졌다.

할 일은 그대로인데 일을 해야할 사람의 능력이 계속 좋아진 것과 같은 것이었다.

하지만 CPU의 6nm 공정의 한계, 물리적인 한계에 부딫혀 소프트웨어는 그동안 공짜로 성능의 향상을 기대할 수 없고

적절한 리소스 이용과 최적화를 통해 더 나은 사용자 경험을 제공해야했다.

아무리 소프트웨어의 발전이 있어도 CPU가 아닌 다른 하드웨어의 발전에 비례해 성능이 비례할 순 없었다.

CPU의 (논리적) 코어가 아무리 많아져도 그 모든 코어를 사용하기란 힘들다.

전세계 누군가가 어떤 스펙의 컴퓨터를 쓸지 모르는 개발자 입장에서 코어의 개수를 **몇 개**라고 상정하고 프로그램을 작성할 수 없기 때문이다.

CPU와 GPU만해도 다른 제조사들이 존재하기 때문에 특정 제조사의 하드웨어 리소스를 100% 활용하는 가정하에 개발하지 않는 이상

고려해야할 경우의 수가 너무 많기 때문이다.

CPU bound와 GPU bound는 하드웨어의 성능 그자체에 있어 결정되는 요소도 있지만,

'bound'를 측정하는 소프트웨어 그 자체에도 일정한 책임이 있다는 점을 고려해야한다.