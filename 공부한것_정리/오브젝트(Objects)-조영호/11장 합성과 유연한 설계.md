# 합성과 유연한 설계

## 상속(확장)하기

앞에서는 상속(확장)을 하면서 유의할 점과 장점, 그리고 확장성에 대해 알아봤다.

상속을 통해서 설계의 유연성과 재사용성을 확보하여 직관적이고

'사람 관점'의 자연스러운 특성(상속, 객체간의 상대적 관계)을 갖출 수 있었다.

하지만 상속의 장점이자 큰 단점은 부모 클래스의 특성과 규칙(인터페이스, 프로토콜)을 모두 충족해야하고 물려받아야 한다는 점이다.

C++ 처럼 메서드를 delete해서 원하는 것만 쏙쏙 빼먹고, 안쓰는 메서드를 삭제할 수 없다. ([Hiding inherited functionality](https://www.learncpp.com/cpp-tutorial/11-6b-hiding-inherited-functionality/))

물론 어떻게든 C++의 delete를 구상해서 사용한다고 한들 상속의 본질을 부정하는 것이기 때문에

**상 당 한** 숙련자가 아니면 **지양** 해야하는 것이다.

<br>

## 상속 말고

상속은 부모 클래스, 선대 클래스의 모든것을 물려받는다

인터페이스 뿐만 아니라 필드까지 모두 물려 받는다.

상속된 클래스가 2~3개 넘어가면 **어떤 필드와 메서드**가 있고,

**어떤 의도를 가졌**는지 파악하기 어렵다.

사람도 똑같아서 할아버지, 할머니도 잘 알지도 모른데 고조할머니의 성격이나 하는 일을 기억하기 힘든것과 같다.

...

사람 비유를 떠나 다시 코드로 돌아오면

상속은 코드를 재사용하기 위해서 이루어 진다.

만약 할 역할이 많으면?

**모든 역할마다 클래스를 상속해서 하나의 기능으로 만들 것**인가?

상속(확장)은 수직적인 관계로나타난다.

마치 사람으로 비유했을 때 고조할어버지, 할아버지, 아빠, 나 4대 대대로 기술을 이어 받듯이 말이다
<br>(대장장이 집안이라고 가정을 하자)

근데 서로 다른 직업을 가진 가족이 대대로 직업을 물려 받아서

대장장이, 상인, 농부, 사냥꾼을 동시에 한다? (대장장이, 상인, 농부, 사냥꾼이 필요한 마을)

한 사람이 4개의 직업을 하는 것보다 4명의 사람이 각각 대장장이, 상인, 농부, 사냥꾼을 하는게 효율적일 것이다.

이렇게 각자 전문적인 작업을 맡은 사람을 모으는 것이 **합성**과 같다.

<br>

## 합성하기

적절한 상속과 합성이 이루어진 그림은 다음과 같다.

![extend_and_composition_diagram](https://github.com/ccppoo/MyMilitaryServiceLog/blob/master/%EA%B3%B5%EB%B6%80%ED%95%9C%EA%B2%83_%EC%A0%95%EB%A6%AC/extend_and_composition.png)

대장장이네 가족은 대대로 기술을 물려받고, 상인의 기술을 물려받지 않아 전문성을 확보할 수 있고

대장장이 기술과 햇갈릴 이유가 없다.

**상속**을 통해 각자 전문성을 띈 클래스를 만들고

**합성**을 통해 전문적인 마을 시장을 이루는 것이다.

합성은 그림과 같이 시장에 사냥꾼이 A가 아니어도 B라는 사냥꾼이 A의 역할을 대신할 수 있어

동적으로, 상황에 따라, 유연하게 교체될 수 있다.

이것이 컴파일 시점에 결정되는 *정적인* 상속과 다른

런타임 시점에 결정되는 *동적인* 합성의 특징이다.

--------------

다음 글은 믹스인(Mixin)에 대해 쓸까하는데 

믹스인이 프로그램 언어에 따라 쓰이는 방식이 달라 어떻게 정리할지 고민좀 하고 쓸 생각이다...

